<p-toast></p-toast>
<p-dialog
      header="Create appointment"
      [modal]="true"
      [(visible)]="visible"
      [style]="{ width: '40rem', height: '100%' }"
      (onHide)="resetForm()"
    >
    <form [formGroup]="appointmentForm" (ngSubmit)="createAppointment()">
      <div class="flex align-items-center gap-3 mb-5" *ngIf="students.length">
        <label for="email" class="font-semibold w-6rem">Students</label>
        <app-drop-down [optionLabel]="'name'" [options]="studentsToShow" (emitData)="user.setValue($event.id)" class="flex-auto" autocomplete="off" />
      </div>
      <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">Description</label>
        <textarea
          class="flex-auto"
          rows="5"
          cols="30"
          pInputTextarea
          formControlName="description">
        </textarea>
      </div>
      <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">Date</label>
        <app-input-calender (dateSelected)="filterSchedule($event)" [minDate]="today"></app-input-calender>
      </div>
      <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">Schedules</label>
        <app-drop-down [optionLabel]="'name'" [options]="schedulesToShow" (emitData)="schedule.setValue($event.id)" class="flex-auto" autocomplete="off" />
      </div>
      <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">psychologist</label>
        <app-drop-down [optionLabel]="'name'" [options]="psychologists" (emitData)="psychologist.setValue($event.id)" class="flex-auto" autocomplete="off" />
      </div>
      <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">reason</label>
        <app-drop-down [options]="reasons" [optionLabel]="'name'" (emitData)="filterCauses($event)" class="flex-auto" autocomplete="off" />
      </div>
      <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">cause</label>
        <app-drop-down [options]="causes" [optionLabel]="'name'" id="email"  (emitData)="cause.setValue($event.id || '')" class="flex-auto" autocomplete="off" />
      </div>
      <div class="flex justify-content-end gap-2">
        <p-button
          label="Cancel"
          severity="secondary"
          (onClick)="visible = false"
        />
        <p-button label="Save" type="submit" [disabled]="appointmentForm.invalid"/>
      </div>
    </form>
    </p-dialog>
